# RAG AI System â€” ì‚¬ìš©ì ë§¤ë‰´ì–¼

---

## 1. ì‹œìŠ¤í…œ ê°œìš”

RAG AIëŠ” ë¬¸ì„œ ê¸°ë°˜ ê²€ìƒ‰ ì¦ê°• ìƒì„±(RAG) ì‹œìŠ¤í…œì…ë‹ˆë‹¤.
ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ ë¬¸ì„œë¥¼ ë²¡í„° DBì™€ ì§€ì‹ ê·¸ë˜í”„ì— ì €ì¥í•˜ê³ , ìì—°ì–´ ì§ˆë¬¸ì— ëŒ€í•´ ê´€ë ¨ ë¬¸ì„œë¥¼ ê²€ìƒ‰í•œ ë’¤ LLMì´ ê·¼ê±° ê¸°ë°˜ ë‹µë³€ì„ ìƒì„±í•©ë‹ˆë‹¤.

### í•µì‹¬ ê¸°ëŠ¥

- **RAG ëŒ€í™”**: ì§€ì‹ ë² ì´ìŠ¤ ë¬¸ì„œ ê¸°ë°˜ ì§ˆì˜ì‘ë‹µ (ë²¡í„° + ê·¸ë˜í”„ í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰)
- **ë©€í‹°ëª¨ë‹¬ ê²€ìƒ‰**: CLIP ê¸°ë°˜ ì´ë¯¸ì§€+í…ìŠ¤íŠ¸ í¬ë¡œìŠ¤ ëª¨ë‹¬ ê²€ìƒ‰ (NEW âœ¨)
- **ì´ë¯¸ì§€ ì²˜ë¦¬**: ìë™ ìº¡ì…”ë‹ (BLIP), OCR (EasyOCR), ì¸ë„¤ì¼ ìƒì„± (NEW âœ¨)
- **ì›¹ ê²€ìƒ‰ í†µí•©**: DuckDuckGo / Brave / Tavily / Google Serper
- **Text-to-SQL**: ìì—°ì–´ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì¡°íšŒ
- **Deep Think**: LLM ìê¸°ê²€ì¦ ì¶”ë¡  ëª¨ë“œ
- **xLAM**: ììœ¨ ì‹¤í–‰ ì—ì´ì „íŠ¸ (ë¬¼ë¥˜ ë„ë©”ì¸)
- **ë‹¤ì¤‘ VDB ì§€ì›**: Qdrant (ë‚´ë¶€/ì™¸ë¶€) + Pinecone (ì„ íƒ)
- **ì§€ì‹ ê·¸ë˜í”„**: Neo4j ê¸°ë°˜ ì—”í‹°í‹°/ê´€ê³„ ì‹œê°í™” ë° í¸ì§‘
- **íŒŒì¸íŠœë‹ ì‹œìŠ¤í…œ**: ëŒ€í™” í”¼ë“œë°± ìˆ˜ì§‘ ë° Ollama ëª¨ë¸ íŒŒì¸íŠœë‹

### ê¸°ìˆ  ìŠ¤íƒ

| êµ¬ë¶„        | ê¸°ìˆ                                                |
| ----------- | -------------------------------------------------- |
| í”„ë¡ íŠ¸ì—”ë“œ  | React 18 + Vite + Tailwind CSS                     |
| ë°±ì—”ë“œ      | FastAPI (Python, ë¹„ë™ê¸°)                           |
| LLM ì¶”ë¡     | Ollama (ë¡œì»¬) / OpenAI / Anthropic / Google / Groq |
| ì„ë² ë”©      | BAAI/bge-m3 (í…ìŠ¤íŠ¸) + OpenAI CLIP (ì´ë¯¸ì§€)        |
| ì´ë¯¸ì§€ ì²˜ë¦¬ | BLIP (ìº¡ì…”ë‹), EasyOCR (OCR), Pillow (ì¸ë„¤ì¼)       |
| ë²¡í„° DB     | Qdrant (ê¸°ë³¸) / Pinecone (ì„ íƒ)                    |
| ì§€ì‹ ê·¸ë˜í”„ | Neo4j                                              |
| ê´€ê³„í˜• DB   | PostgreSQL (ë©”íƒ€ë°ì´í„°/ì‚¬ìš©ì ë°ì´í„°)              |
| ìºì‹œ        | Redis                                              |
| ë¬¸ì„œ ì²˜ë¦¬   | Docling                                            |

---

## 2. ì„¤ì¹˜ ë° ì‹¤í–‰

### 2.1 ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- **Docker Desktop** (PostgreSQL, Qdrant, Redis, Neo4j ì‹¤í–‰ìš©)
- **Python 3.11+**
- **Node.js 18+**
- **Ollama** (ë¡œì»¬ LLM ì¶”ë¡  ì„œë²„)

### 2.2 Docker ì„œë¹„ìŠ¤ ì‹œì‘

```bash
cd backend
docker-compose -f docker-compose.yml up -d
```

| ì„œë¹„ìŠ¤     | í¬íŠ¸                     | ìš©ë„                                 |
| ---------- | ------------------------ | ------------------------------------ |
| PostgreSQL | 5432                     | ì‚¬ìš©ì ë°ì´í„°, ë©”íƒ€ë°ì´í„°, ëŒ€í™” ê¸°ë¡ |
| Qdrant     | 6333                     | ë²¡í„° ì„ë² ë”© ì €ì¥ ë° ê²€ìƒ‰             |
| Redis      | 6379                     | ìºì‹±, ì„¸ì…˜, ì†ë„ ì œí•œ                |
| Neo4j      | 7474 (HTTP), 7687 (Bolt) | ì§€ì‹ ê·¸ë˜í”„                          |
| Portainer  | 9090                     | Docker ê´€ë¦¬ GUI                      |

### 2.3 ë°±ì—”ë“œ ì‹¤í–‰

```bash
cd backend
pip install -r requirements.txt
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 2.4 í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰

```bash
cd frontend
npm install
npm run dev
```

- **í”„ë¡ íŠ¸ì—”ë“œ**: http://localhost:5173
- **ë°±ì—”ë“œ API**: http://localhost:8000
- **API ë¬¸ì„œ (Swagger)**: http://localhost:8000/docs

### 2.5 í™˜ê²½ ë³€ìˆ˜ (.env)

`backend/.env` íŒŒì¼ì— ë‹¤ìŒ ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤:

```env
# ë°ì´í„°ë² ì´ìŠ¤
DATABASE_URL=postgresql+asyncpg://rag_user:rag_password@localhost:5432/rag_db

# ë²¡í„° DB
QDRANT_URL=http://localhost:6333

# ìºì‹œ
REDIS_URL=redis://localhost:6379
CACHE_ENABLED=True
CACHE_TTL_SECONDS=3600

# ì§€ì‹ ê·¸ë˜í”„
NEO4J_URL=neo4j://localhost:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=password

# LLM
OLLAMA_BASE_URL=http://localhost:11434
LLM_MODEL=llama3.1
LLM_TEMPERATURE=0.0
EMBEDDING_MODEL=BAAI/bge-m3

# ì¸ì¦
SECRET_KEY=your-secret-key-at-least-32-characters
ACCESS_TOKEN_EXPIRE_MINUTES=30

# RAG
RAG_TOP_K=5
RAG_CHUNK_SIZE=500
RAG_CHUNK_OVERLAP=50
```

---

## 3. íšŒì›ê°€ì… ë° ë¡œê·¸ì¸

### 3.1 íšŒì›ê°€ì…

1. http://localhost:5173/register ì ‘ì†
2. ì´ë©”ì¼, ì´ë¦„, ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
3. **ê°€ì…í•˜ê¸°** í´ë¦­

> ê°€ì… ì‹œ ê¸°ë³¸ ì§€ì‹ ë² ì´ìŠ¤(`default_kb`)ì™€ ê¸°ë³¸ ì—ì´ì „íŠ¸ 2ê°œê°€ ìë™ ìƒì„±ë©ë‹ˆë‹¤.

### 3.2 ë¡œê·¸ì¸

1. http://localhost:5173/login ì ‘ì†
2. ì´ë©”ì¼(ì•„ì´ë””), ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
3. **ë¡œê·¸ì¸** í´ë¦­

> JWT í† í°ì´ ë°œê¸‰ë˜ì–´ ë¸Œë¼ìš°ì €ì— ì €ì¥ë©ë‹ˆë‹¤. ê¸°ë³¸ ë§Œë£Œ ì‹œê°„ì€ 30ë¶„ì…ë‹ˆë‹¤.

---

## 4. ëŒ€ì‹œë³´ë“œ (í™ˆ)

ë¡œê·¸ì¸ í›„ ê°€ì¥ ë¨¼ì € ë³´ì´ëŠ” í™”ë©´ì…ë‹ˆë‹¤.

### í‘œì‹œ ì •ë³´

- **ì¸ì‚¬ë§**: ì‹œê°„ëŒ€ë³„ ì¸ì‚¬ (ì¢‹ì€ ì•„ì¹¨/ì˜¤í›„/ì €ë…ì´ì—ìš”)
- **í†µê³„**: ì—ì´ì „íŠ¸ ìˆ˜, ì§€ì‹ ë² ì´ìŠ¤ ìˆ˜, ë¬¸ì„œ ìˆ˜, ëŒ€í™” ìˆ˜
- **ì‹œìŠ¤í…œ ìƒíƒœ**: Ollama / Qdrant / Neo4j / Redis ì—°ê²° ìƒíƒœ (ì´ˆë¡: ì—°ê²°, ë¹¨ê°•: ë¯¸ì—°ê²°)
- **ìµœê·¼ ëŒ€í™”**: ìµœê·¼ 5ê°œ ëŒ€í™” ì„¸ì…˜
- **í™œì„± ì—ì´ì „íŠ¸**: í˜„ì¬ ë“±ë¡ëœ ì—ì´ì „íŠ¸ ëª©ë¡
- **ì‹œì‘ ê°€ì´ë“œ**: ì‹ ê·œ ì‚¬ìš©ìë¥¼ ìœ„í•œ 3ë‹¨ê³„ ì•ˆë‚´

### ë¹ ë¥¸ ì‹¤í–‰ ì¹´ë“œ

| ì¹´ë“œ          | ê¸°ëŠ¥                           |
| ------------- | ------------------------------ |
| RAG ëŒ€í™” ì‹œì‘ | ì±„íŒ… í™”ë©´ìœ¼ë¡œ ì´ë™             |
| ì§€ì‹ ë² ì´ìŠ¤   | ì§€ì‹ ë² ì´ìŠ¤ ê´€ë¦¬ í™”ë©´ìœ¼ë¡œ ì´ë™ |
| ì—ì´ì „íŠ¸ ê´€ë¦¬ | ì—ì´ì „íŠ¸ ê´€ë¦¬ í™”ë©´ìœ¼ë¡œ ì´ë™    |

---

## 5. ì±„íŒ… (RAG ëŒ€í™”)

### 5.1 ê¸°ë³¸ ì‚¬ìš©ë²•

1. ì™¼ìª½ ì‚¬ì´ë“œë°”ì—ì„œ **ìƒˆë¡œìš´ ëŒ€í™”** í´ë¦­ (ë˜ëŠ” ê¸°ì¡´ ëŒ€í™” ì„ íƒ)
2. ìƒë‹¨ì—ì„œ **ì—ì´ì „íŠ¸**ì™€ **ì§€ì‹ ë² ì´ìŠ¤** ì„ íƒ
3. í•˜ë‹¨ ì…ë ¥ì°½ì— ì§ˆë¬¸ ì…ë ¥ í›„ **ì „ì†¡**

### 5.2 ì—ì´ì „íŠ¸ ì„ íƒ

ì±„íŒ… ìƒë‹¨ ì™¼ìª½ì˜ ë³´ë¼ìƒ‰ íƒœê·¸ë¥¼ í´ë¦­í•˜ë©´ ì—ì´ì „íŠ¸ë¥¼ ì „í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

| ê¸°ë³¸ ì—ì´ì „íŠ¸     | ìš©ë„                           |
| ----------------- | ------------------------------ |
| ì¼ë°˜ ëŒ€í™” ë¹„ì„œ    | ììœ  ëŒ€í™”, ë²ˆì—­, ì½”ë”© ë“± ë²”ìš©  |
| RAG ì „ë¬¸ ì—ì´ì „íŠ¸ | ì§€ì‹ ë² ì´ìŠ¤ ë¬¸ì„œ ê¸°ë°˜ ì§ˆì˜ì‘ë‹µ |

### 5.3 ì§€ì‹ ë² ì´ìŠ¤ ì„ íƒ

ì±„íŒ… ìƒë‹¨ì˜ ì´ˆë¡ìƒ‰ íƒœê·¸ë¥¼ í´ë¦­í•˜ë©´ KBë¥¼ ì„ íƒí•©ë‹ˆë‹¤. **ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥** â€” ì—¬ëŸ¬ KBì˜ ë¬¸ì„œë¥¼ ë™ì‹œì— ê²€ìƒ‰í•©ë‹ˆë‹¤.

### 5.4 ë¶€ê°€ ê¸°ëŠ¥ (ì…ë ¥ì°½ í•˜ë‹¨ ì•„ì´ì½˜)

| ì•„ì´ì½˜        | ê¸°ëŠ¥       | ì„¤ëª…                                              |
| ------------- | ---------- | ------------------------------------------------- |
| ğŸ“ í´ë¦½       | íŒŒì¼ ì²¨ë¶€  | PDF, DOCX, TXT, MD, PPTX, XLSX íŒŒì¼ì„ ì§ˆë¬¸ì— ì²¨ë¶€ |
| ğŸŒ ì§€êµ¬ë³¸     | ì›¹ ê²€ìƒ‰    | ì‹¤ì‹œê°„ ì›¹ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë‹µë³€ì— ë°˜ì˜                 |
| ğŸ”Œ í”ŒëŸ¬ê·¸     | MCP ì„œë²„   | ë“±ë¡ëœ MCP ë„êµ¬ í™œì„±í™”                            |
| ğŸ’¾ í•˜ë“œë””ìŠ¤í¬ | SQL ëª¨ë“œ   | Text-to-SQLë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ìƒì„± ë° ì‹¤í–‰      |
| ğŸ§  ë‡Œ         | Deep Think | ì‹¬ì¸µ ë¶„ì„ + ìê¸°ê²€ì¦ ì¶”ë¡  ëª¨ë“œ                    |

### 5.5 ì›¹ ê²€ìƒ‰

1. ì…ë ¥ì°½ ì•„ë˜ **ì§€êµ¬ë³¸ ì•„ì´ì½˜** í´ë¦­ (íŒŒë€ìƒ‰ìœ¼ë¡œ í™œì„±í™”)
2. ì§ˆë¬¸ ì…ë ¥ í›„ ì „ì†¡
3. ì„¤ì •ì—ì„œ ì„ íƒí•œ ê²€ìƒ‰ ì—”ì§„ìœ¼ë¡œ ì‹¤ì‹œê°„ ê²€ìƒ‰ ìˆ˜í–‰

| ê²€ìƒ‰ ì—”ì§„     | API í‚¤ í•„ìš” | ë¬´ë£Œ í•œë„  |
| ------------- | ----------- | ---------- |
| DuckDuckGo    | ë¶ˆí•„ìš”      | ë¬´ì œí•œ     |
| Brave Search  | í•„ìš”        | 2,000íšŒ/ì›” |
| Tavily        | í•„ìš”        | 1,000íšŒ/ì›” |
| Google Serper | í•„ìš”        | 2,500íšŒ    |

### 5.6 Deep Think (ì‹¬ì¸µ ì¶”ë¡ )

1. **ë‡Œ ì•„ì´ì½˜** í´ë¦­ (ë³´ë¼ìƒ‰ìœ¼ë¡œ í™œì„±í™”)
2. ì§ˆë¬¸ ì „ì†¡

í™œì„±í™” ì‹œ ì¶”ê°€ ë™ì‘:

- LLMì´ ì§ˆë¬¸ ì˜ë„ë¥¼ ì •ë°€ ë¶„ì„ (process / search / rag)
- ë‹µë³€ ìƒì„± ê³¼ì •ì„ **ì‚¬ê³  ê³¼ì •(Thinking)** ìœ¼ë¡œ í‘œì‹œ
- ë‹µë³€ ì™„ë£Œ í›„ **ìê¸°ê²€ì¦(Self-Reflection)** ìˆ˜í–‰ â†’ ì‹ ë¢°ë„ ì ìˆ˜ í‘œì‹œ

### 5.7 Text-to-SQL

1. ì„¤ì •ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ë“±ë¡ (PostgreSQL / MySQL / SQLite)
2. **í•˜ë“œë””ìŠ¤í¬ ì•„ì´ì½˜** í´ë¦­ â†’ ì‚¬ìš©í•  DB ì—°ê²° ì„ íƒ
3. ìì—°ì–´ë¡œ ì§ˆë¬¸ (ì˜ˆ: "ìµœê·¼ 30ì¼ê°„ ë§¤ì¶œ ìƒìœ„ 10ê°œ ì œí’ˆì„ ë³´ì—¬ì¤˜")
4. LLMì´ SQL ì¿¼ë¦¬ ìƒì„± â†’ ì‹¤í–‰ â†’ ê²°ê³¼ í‘œì‹œ

### 5.8 ë©”ì‹œì§€ ê¸°ëŠ¥

- **ë³µì‚¬**: AI ë‹µë³€ ìš°ì¸¡ ë³µì‚¬ ì•„ì´ì½˜ í´ë¦­
- **ì¬ìƒì„±**: ë‹µë³€ í•˜ë‹¨ ìƒˆë¡œê³ ì¹¨ ì•„ì´ì½˜ìœ¼ë¡œ ì¬ì§ˆì˜
- **Markdown ì§€ì›**: ì½”ë“œ ë¸”ë¡, í‘œ, ëª©ë¡, ë§í¬ ë“± ë Œë”ë§
- **SQL ì½”ë“œ ë¸”ë¡**: ìƒì„±ëœ SQLì€ ë³„ë„ ì½”ë“œ ë¸”ë¡ìœ¼ë¡œ í‘œì‹œ + ë³µì‚¬ ê°€ëŠ¥

---

## 6. ì§€ì‹ ë² ì´ìŠ¤ ê´€ë¦¬

### 6.1 ì§€ì‹ ë² ì´ìŠ¤ ëª©ë¡

ì™¼ìª½ ë©”ë‰´ **ì§€ì‹ ë² ì´ìŠ¤ ê´€ë¦¬** í´ë¦­ ì‹œ ë“±ë¡ëœ KB ëª©ë¡ì´ ì¹´ë“œ í˜•íƒœë¡œ í‘œì‹œë©ë‹ˆë‹¤.

ì¹´ë“œì— í‘œì‹œë˜ëŠ” ì •ë³´:

- KB ì´ë¦„ / ì„¤ëª…
- ì²­í‚¹ ë°©ì‹ (Fixed / Semantic)
- ë¬¸ì„œ ìˆ˜, ì²­í¬ ìˆ˜, ê·¸ë˜í”„ ë…¸ë“œ ìˆ˜
- ìƒì„±ì¼

### 6.2 ì§€ì‹ ë² ì´ìŠ¤ ìƒì„±

1. **ìƒˆ ì§€ì‹ ë² ì´ìŠ¤ ë§Œë“¤ê¸°** ë²„íŠ¼ í´ë¦­
2. ì´ë¦„, ì„¤ëª… ì…ë ¥
3. ì²­í‚¹ ì „ëµ ì„ íƒ:

| ì „ëµ                     | ì„¤ëª…                    | ì„¤ì •ê°’                                 |
| ------------------------ | ----------------------- | -------------------------------------- |
| **ê³ ì • í¬ê¸°** (Fixed)    | ì¼ì • í† í° ìˆ˜ë¡œ ë¶„í•      | Chunk Size (128~2048), Overlap (0~200) |
| **ì˜ë¯¸ ê¸°ë°˜** (Semantic) | ì˜ë¯¸ ë³€í™” ì§€ì ì—ì„œ ë¶„í•  | Similarity Threshold (0.1~0.95)        |

4. (ì„ íƒ) ì™¸ë¶€ Qdrant ì„œë¹„ìŠ¤ ì„ íƒ
5. **ìƒì„±í•˜ê¸°** í´ë¦­

### 6.3 ë¬¸ì„œ ì—…ë¡œë“œ

KB ì„ íƒ í›„ **ëª©ë¡** íƒ­ì—ì„œ:

1. **íŒŒì¼ ì—…ë¡œë“œ** ë˜ëŠ” **í´ë” ì—…ë¡œë“œ** ë²„íŠ¼ í´ë¦­
2. ë˜ëŠ” íŒŒì¼ì„ í™”ë©´ì— **ë“œë˜ê·¸ ì•¤ ë“œë¡­**
3. ì—…ë¡œë“œ í›„ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìë™ ì²˜ë¦¬:
   - ë¬¸ì„œ íŒŒì‹± (Docling)
   - í…ìŠ¤íŠ¸ ì²­í‚¹
   - ë²¡í„° ì„ë² ë”© (BAAI/bge-m3)
   - Qdrant ì €ì¥
   - Neo4j ì—”í‹°í‹° ì¶”ì¶œ ë° ê·¸ë˜í”„ ìƒì„±

| ì§€ì› íŒŒì¼ í˜•ì‹           |
| ------------------------ |
| **ë¬¸ì„œ**                 |
| PDF (.pdf)               |
| Word (.docx, .doc)       |
| í…ìŠ¤íŠ¸ (.txt)            |
| Markdown (.md)           |
| PowerPoint (.pptx)       |
| Excel (.xlsx)            |
| **ì´ë¯¸ì§€** (NEW âœ¨)      |
| JPEG (.jpg, .jpeg)       |
| PNG (.png)               |
| GIF (.gif)               |
| WebP (.webp)             |

íŒŒì¼ ìƒíƒœ:

- ğŸŸ¡ **Uploading** â€” ì—…ë¡œë“œ ì¤‘
- ğŸ”µ **Processing** â€” ì²˜ë¦¬ ì¤‘ (ì²­í‚¹, ì„ë² ë”©, ì´ë¯¸ì§€ ì²˜ë¦¬)
- ğŸŸ¢ **Ready** â€” ì™„ë£Œ
- ğŸ”´ **Error** â€” ì‹¤íŒ¨ (ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸ ê°€ëŠ¥)

### 6.3.1 ì´ë¯¸ì§€ íŒŒì¼ ì—…ë¡œë“œ (NEW âœ¨)

ì´ë¯¸ì§€ íŒŒì¼ì„ ì§ì ‘ ì—…ë¡œë“œí•˜ë©´ ìë™ìœ¼ë¡œ ë‹¤ìŒ ì²˜ë¦¬ê°€ ìˆ˜í–‰ë©ë‹ˆë‹¤:

- **CLIP ì„ë² ë”©**: ì´ë¯¸ì§€ë¥¼ 512ì°¨ì› ë²¡í„°ë¡œ ë³€í™˜í•˜ì—¬ ê²€ìƒ‰ ê°€ëŠ¥í•˜ê²Œ ì €ì¥
- **ìë™ ìº¡ì…”ë‹**: BLIP ëª¨ë¸ì´ ì´ë¯¸ì§€ ë‚´ìš©ì„ ìì—°ì–´ë¡œ ì„¤ëª… ìƒì„±
- **OCR í…ìŠ¤íŠ¸ ì¶”ì¶œ**: EasyOCRì´ ì´ë¯¸ì§€ ë‚´ í•œê¸€/ì˜ë¬¸ í…ìŠ¤íŠ¸ ì¶”ì¶œ
- **ì¸ë„¤ì¼ ìƒì„±**: 300x300 ì¸ë„¤ì¼ ìë™ ìƒì„± (ì›¹ ìµœì í™”)

**ì‚¬ìš© ì˜ˆì‹œ**:
- ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ ì—…ë¡œë“œ â†’ "ë°ì´í„° íë¦„ ë‹¤ì´ì–´ê·¸ë¨ ë³´ì—¬ì¤˜" ê²€ìƒ‰ ê°€ëŠ¥
- ìŠ¤í¬ë¦°ìƒ· ì—…ë¡œë“œ â†’ ë‚´ë¶€ í…ìŠ¤íŠ¸ë¡œ ê²€ìƒ‰ ê°€ëŠ¥
- PDF ë‚´ ì´ë¯¸ì§€ ìë™ ì¶”ì¶œ â†’ ì°¨íŠ¸, ê·¸ë˜í”„ ê²€ìƒ‰ ê°€ëŠ¥

**ë©€í‹°ëª¨ë‹¬ ê²€ìƒ‰ í™œì„±í™”**:
1. âš™ï¸ ì„¤ì • â†’ ê³ ê¸‰ ì„¤ì •
2. "ë©€í‹°ëª¨ë‹¬ ê²€ìƒ‰ í™œì„±í™”" í† ê¸€
3. í…ìŠ¤íŠ¸ ì§ˆë¬¸ìœ¼ë¡œ ê´€ë ¨ ì´ë¯¸ì§€ ê²€ìƒ‰ ê°€ëŠ¥

### 6.4 ì²­í¬ ë·°

**ì²­í¬** íƒ­ì—ì„œ ë¬¸ì„œê°€ ì–´ë–»ê²Œ ë¶„í• ë˜ì—ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**í…ìŠ¤íŠ¸ ì²­í¬**:
- ê° ì²­í¬ì˜ í…ìŠ¤íŠ¸ ë‚´ìš© í‘œì‹œ
- ì†ŒìŠ¤ íŒŒì¼ë³„ í•„í„°ë§
- í‚¤ì›Œë“œ ê²€ìƒ‰ (ì‹œë§¨í‹± ê²€ìƒ‰)

**ì´ë¯¸ì§€ ì²­í¬** (NEW âœ¨):
- ì¸ë„¤ì¼ ë¯¸ë¦¬ë³´ê¸°
- ìë™ ìƒì„±ëœ ìº¡ì…˜ í‘œì‹œ
- OCR ì¶”ì¶œ í…ìŠ¤íŠ¸ í‘œì‹œ
- ì´ë¯¸ì§€ í¬ê¸° ë° ë©”íƒ€ë°ì´í„°
- í´ë¦­í•˜ì—¬ ì›ë³¸ í¬ê¸°ë¡œ í™•ëŒ€ ë³´ê¸°
- í˜ì´ì§€ë„¤ì´ì…˜

### 6.5 ì§€ì‹ ê·¸ë˜í”„ ë·°

**ê·¸ë˜í”„** íƒ­ì—ì„œ í•´ë‹¹ KBì˜ ì—”í‹°í‹°/ê´€ê³„ë¥¼ ì‹œê°ì ìœ¼ë¡œ íƒìƒ‰í•©ë‹ˆë‹¤.

#### ê¸°ë³¸ ì¡°ì‘

- **ë§ˆìš°ìŠ¤ ë“œë˜ê·¸**: ë…¸ë“œ ì´ë™
- **ìŠ¤í¬ë¡¤**: ì¤Œ ì¸/ì•„ì›ƒ
- **ë¹ˆ ì˜ì—­ ë“œë˜ê·¸**: í™”ë©´ ì´ë™ (íŒ¬)

#### ë…¸ë“œ íƒ€ì… ë° ìƒ‰ìƒ

| íƒ€ì…             | ìƒ‰ìƒ | ì„¤ëª…        |
| ---------------- | ---- | ----------- |
| Location / Place | ì´ˆë¡ | ì¥ì†Œ, ìœ„ì¹˜  |
| Vehicle          | íŒŒë‘ | ì°¨ëŸ‰        |
| Person           | ë…¸ë‘ | ì¸ë¬¼        |
| Entity           | ë³´ë¼ | ì¼ë°˜ ì—”í‹°í‹° |
| Concept          | ì²­ë¡ | ê°œë…        |
| Event            | ë¹¨ê°• | ì´ë²¤íŠ¸      |
| Organization     | ë¶„í™ | ì¡°ì§        |
| Document         | ë‚¨ìƒ‰ | ë¬¸ì„œ        |

#### ë…¸ë“œ CRUD

- **ë…¸ë“œ ì¶”ê°€**: ìš°ì¸¡ ìƒë‹¨ ì´ˆë¡ **+** ë²„íŠ¼ â†’ íƒ€ì…, ì´ë¦„ ì…ë ¥ â†’ ìƒì„±
- **ë…¸ë“œ í¸ì§‘**: ë…¸ë“œ í´ë¦­ â†’ ì´ë¦„ ìˆ˜ì • â†’ ì—…ë°ì´íŠ¸
- **ë…¸ë“œ ì‚­ì œ**: ë…¸ë“œ í´ë¦­ â†’ ì‚­ì œ (ì—°ê²°ëœ ê´€ê³„ë„ í•¨ê»˜ ì‚­ì œ)

#### ì—£ì§€(ê´€ê³„) CRUD

- **ê´€ê³„ ì¶”ê°€**: ì£¼í™© ë§í¬ ë²„íŠ¼ â†’ ê´€ê³„ íƒ€ì… ì„ íƒ â†’ ì†ŒìŠ¤ ë…¸ë“œ í´ë¦­ â†’ íƒ€ê²Ÿ ë…¸ë“œ í´ë¦­
- **ê´€ê³„ ì‚­ì œ**: ì—£ì§€ í´ë¦­ â†’ ì‚­ì œ

ì‚¬ìš© ê°€ëŠ¥í•œ ê´€ê³„ íƒ€ì…: `RELATION`, `INCLUDES`, `INVOLVES`, `CAUSES`, `RELATED_TO`, `HAS`, `PART_OF`

### 6.6 ì„¤ì • ë³€ê²½

KB ìƒì„¸ í™”ë©´ ìš°ì¸¡ **ì„¤ì •** ë²„íŠ¼ìœ¼ë¡œ ì´ë¦„, ì„¤ëª…, ì²­í‚¹ íŒŒë¼ë¯¸í„°, ì™¸ë¶€ VDBë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## 7. ì—ì´ì „íŠ¸ ê´€ë¦¬

### 7.1 ì—ì´ì „íŠ¸ ëª©ë¡

ì™¼ìª½ ë©”ë‰´ **ì—ì´ì „íŠ¸ ê´€ë¦¬** í´ë¦­ ì‹œ ë“±ë¡ëœ ì—ì´ì „íŠ¸ê°€ ì¹´ë“œë¡œ í‘œì‹œë©ë‹ˆë‹¤.

### 7.2 ì—ì´ì „íŠ¸ ìƒì„±

1. **ìƒˆ ì—ì´ì „íŠ¸** ë²„íŠ¼ í´ë¦­
2. ë‹¤ìŒ í•­ëª© ì„¤ì •:

| í•­ëª©            | ì„¤ëª…                                                   |
| --------------- | ------------------------------------------------------ |
| ì´ë¦„            | ì—ì´ì „íŠ¸ í‘œì‹œ ì´ë¦„                                     |
| ì„¤ëª…            | ì—ì´ì „íŠ¸ì˜ ì—­í•  ì„¤ëª…                                   |
| LLM ëª¨ë¸        | ì‚¬ìš©í•  ëª¨ë¸ ì„ íƒ (Ollama ë¡œì»¬ ëª¨ë¸ ë˜ëŠ” ì™¸ë¶€ API ëª¨ë¸) |
| ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ | ì—ì´ì „íŠ¸ì˜ í˜ë¥´ì†Œë‚˜/í–‰ë™ ì§€ì¹¨                          |
| ê²Œì‹œ ì—¬ë¶€       | ëŒ€í™”ì—ì„œ ì„ íƒ ê°€ëŠ¥ ì—¬ë¶€                                |

3. **ì €ì¥** í´ë¦­

### 7.3 ì—ì´ì „íŠ¸ í¸ì§‘/ì‚­ì œ

ì¹´ë“œ ìš°ì¸¡ ì  ì„¸ê°œ(â‹¯) ë©”ë‰´ì—ì„œ:

- **í¸ì§‘**: ì„¤ì • ìˆ˜ì •
- **ê²Œì‹œ/ê²Œì‹œ ì·¨ì†Œ**: ëŒ€í™”ì—ì„œ ì„ íƒ ê°€ëŠ¥ ì—¬ë¶€ í† ê¸€
- **ì‚­ì œ**: ì—ì´ì „íŠ¸ ì‚­ì œ (ê¸°ë³¸ ì—ì´ì „íŠ¸ëŠ” ì‚­ì œ ë¶ˆê°€)

---

## 8. ì‹œìŠ¤í…œ ì„¤ì •

ì™¼ìª½ í•˜ë‹¨ **ì‹œìŠ¤í…œ ì„¤ì •** (í†±ë‹ˆë°”í€´) í´ë¦­ ì‹œ ì„¤ì • ëª¨ë‹¬ì´ ì—´ë¦½ë‹ˆë‹¤.

### 8.1 ì¼ë°˜ ì„¤ì •

- **ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ ì „í™˜**: í† ê¸€ ìŠ¤ìœ„ì¹˜ë¡œ í…Œë§ˆ ë³€ê²½
- **ì‹œìŠ¤í…œ ì–¸ì–´**: í•œêµ­ì–´ (ê³ ì •)

### 8.2 ëª¨ë¸ ê´€ë¦¬

#### LLM ëª¨ë¸ íƒ­

**Ollama ë¡œì»¬ ëª¨ë¸:**

- Ollamaì— ì„¤ì¹˜ëœ ëª¨ë¸ ëª©ë¡ í‘œì‹œ
- ëª¨ë¸ ì´ë¦„, íŒŒë¼ë¯¸í„° ìˆ˜, ì–‘ìí™” ë ˆë²¨, í¬ê¸°(GB) í™•ì¸
- í´ë¦­ìœ¼ë¡œ ê¸°ë³¸ ëª¨ë¸ ì„ íƒ
- ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ìœ¼ë¡œ ëª©ë¡ ê°±ì‹ 

**ì™¸ë¶€ API ëª¨ë¸:**

- API í‚¤ê°€ ë“±ë¡ëœ ì œê³µìì˜ ëª¨ë¸ í‘œì‹œ
- ì§€ì› ì œê³µì: OpenAI, Anthropic, Google Gemini, Groq
- í´ë¦­ìœ¼ë¡œ ëª¨ë¸ ì„ íƒ

#### ì„ë² ë”© ëª¨ë¸ íƒ­

- í˜„ì¬ ì„ë² ë”© ëª¨ë¸ í™•ì¸ (ê¸°ë³¸: BAAI/bge-m3)
- **Rerank ì‚¬ìš©** í† ê¸€: ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì„ë² ë”© ìœ ì‚¬ë„ë¡œ ì¬ì •ë ¬

#### ë©€í‹°ëª¨ë‹¬ ëª¨ë¸ íƒ­

- **ë¹„ì „/ë©€í‹°ëª¨ë‹¬ ì§€ì›** í† ê¸€
- ë¹„ì „ ëª¨ë¸ ì„ íƒ (llava, bakllava, minicpm-v ë“±)
- íŒŒì¼ ì €ì¥ì†Œ ì„¤ì • (ë¡œì»¬ / MinIO / AWS S3)

### 8.3 Graph DB

- Neo4j ì—°ê²° ì •ë³´ í™•ì¸ (URL, ì‚¬ìš©ìëª…)
- **ì—°ê²° í…ŒìŠ¤íŠ¸** ë²„íŠ¼ìœ¼ë¡œ ìƒíƒœ í™•ì¸

### 8.4 ë©”ëª¨ë¦¬ / ìºì‹œ

- Redis ì—°ê²° URL í™•ì¸
- ìºì‹œ í™œì„±í™” ìƒíƒœ ë° TTL í™•ì¸
- **ì—°ê²° í…ŒìŠ¤íŠ¸** ë²„íŠ¼ìœ¼ë¡œ ìƒíƒœ í™•ì¸

### 8.5 ì›¹ ê²€ìƒ‰

ê²€ìƒ‰ ì—”ì§„ ì„ íƒ ì¹´ë“œ:

| ì—”ì§„          | íŠ¹ì§•                       |
| ------------- | -------------------------- |
| DuckDuckGo    | ë¬´ë£Œ, API í‚¤ ë¶ˆí•„ìš”        |
| Brave Search  | ì›” 2,000íšŒ ë¬´ë£Œ, ê³ í’ˆì§ˆ    |
| Tavily AI     | ì›” 1,000íšŒ ë¬´ë£Œ, AI ìµœì í™” |
| Google Serper | 2,500íšŒ ë¬´ë£Œ               |

### 8.6 API í‚¤ ê´€ë¦¬

ë‹¤ìŒ ì„œë¹„ìŠ¤ì˜ API í‚¤ë¥¼ ë“±ë¡/ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

| ë¶„ë¥˜   | ì„œë¹„ìŠ¤                                 |
| ------ | -------------------------------------- |
| LLM    | OpenAI, Anthropic, Google Gemini, Groq |
| ê²€ìƒ‰   | Brave Search, Tavily, Google Serper    |
| ì €ì¥ì†Œ | MinIO, AWS S3                          |

> API í‚¤ëŠ” Fernet ì•”í˜¸í™”(AES)ë¡œ ì„œë²„ì— ì•ˆì „í•˜ê²Œ ì €ì¥ë©ë‹ˆë‹¤.

### 8.7 ë°ì´í„°ë² ì´ìŠ¤ (Text-to-SQLìš©)

ì™¸ë¶€ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ë“±ë¡í•©ë‹ˆë‹¤.

1. ì´ë¦„, DB íƒ€ì… (PostgreSQL / MySQL / SQLite) ì„ íƒ
2. í˜¸ìŠ¤íŠ¸, í¬íŠ¸, DB ì´ë¦„, ì‚¬ìš©ì, ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
3. **ì¶”ê°€** í´ë¦­
4. **ì—°ê²° í…ŒìŠ¤íŠ¸** ë¡œ í™•ì¸

### 8.8 MCP ì„œë²„

Model Context Protocol ì„œë²„ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.

1. ì´ë¦„ ì…ë ¥
2. íƒ€ì… ì„ íƒ:
   - **SSE**: URL ì…ë ¥ (Server-Sent Events)
   - **Stdio**: ì‹¤í–‰ ëª…ë ¹ì–´ ì…ë ¥
3. **ì¶”ê°€** í´ë¦­

ë“±ë¡ëœ MCP ì„œë²„ëŠ” ì±„íŒ… í™”ë©´ì—ì„œ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 8.9 ì™¸ë¶€ ì„œë¹„ìŠ¤ (ë²¡í„° DB / DB)

ì„¤ì • í™”ë©´ ë˜ëŠ” ì§€ì‹ ë² ì´ìŠ¤ ì„¤ì •ì—ì„œ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.

| ì„œë¹„ìŠ¤ íƒ€ì… | ìš©ë„           | í•„ìš” ì •ë³´                                |
| ----------- | -------------- | ---------------------------------------- |
| Qdrant      | ì™¸ë¶€ ë²¡í„° DB   | URL, API Key (ì„ íƒ)                      |
| Pinecone    | ëŒ€ì²´ ë²¡í„° DB   | API Key, Index Name (database í•„ë“œ)      |
| PostgreSQL  | ì™¸ë¶€ ê´€ê³„í˜• DB | Host, Port, Username, Password, Database |

---

## 9. ì•„í‚¤í…ì²˜ ìƒì„¸

### 9.1 RAG íŒŒì´í”„ë¼ì¸ íë¦„

```
ì‚¬ìš©ì ì§ˆë¬¸
    â”‚
    â–¼
[1] ì˜ë„ ë¶„ì„ (Router)
    â”œâ”€â”€ "process" â†’ xLAM ììœ¨ ì—ì´ì „íŠ¸ ì‹¤í–‰
    â”œâ”€â”€ "search"  â†’ ì›¹ ê²€ìƒ‰ (DuckDuckGo / Brave / Tavily / Serper)
    â””â”€â”€ "rag"     â†’ ë²¡í„° + ê·¸ë˜í”„ ê²€ìƒ‰
                      â”‚
                      â–¼
              [2] RetrieverFactory
                  â”œâ”€â”€ Source A: ë‚´ë¶€ Qdrant (í•­ìƒ)
                  â”œâ”€â”€ Source B: KB ì™¸ë¶€ Qdrant (ì„¤ì • ì‹œ)
                  â””â”€â”€ Source C: ì‚¬ìš©ì ê¸°ë³¸ ì™¸ë¶€ VDB (ì„¤ì • ì‹œ)
                      â”‚
                      â–¼  (1ê°œë©´ ë‹¨ì¼, 2+ê°œë©´ HybridRetriever)
              [3] ê²°ê³¼ ë³‘í•© + ì¤‘ë³µ ì œê±°
                      â”‚
                      â–¼
              [4] Rerank (ì„ íƒ, ì„ë² ë”© ìœ ì‚¬ë„ ê¸°ë°˜)
                      â”‚
                      â–¼
              [5] ê·¸ë˜í”„ ì»¨í…ìŠ¤íŠ¸ ì¶”ê°€ (Neo4j)
                      â”‚
                      â–¼
              [6] LLM ë‹µë³€ ìƒì„± (ìŠ¤íŠ¸ë¦¬ë°)
                      â”‚
                      â–¼
              [7] ìê¸°ê²€ì¦ (Deep Think ON ì‹œ)
```

### 9.2 ë¬¸ì„œ ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸

```
íŒŒì¼ ì—…ë¡œë“œ
    â”‚
    â–¼
[1] Docling íŒŒì‹± (PDF, DOCX, PPTX ë“±)
    â”‚
    â–¼
[2] í…ìŠ¤íŠ¸ ì²­í‚¹
    â”œâ”€â”€ ê³ ì • í¬ê¸°: RecursiveCharacterTextSplitter
    â””â”€â”€ ì˜ë¯¸ ê¸°ë°˜: SemanticChunker
    â”‚
    â–¼
[3] ë©”íƒ€ë°ì´í„° íƒœê¹… (user_id, kb_id, source)
    â”‚
    â”œâ”€â”€â–¶ [4a] Qdrant ë²¡í„° ì €ì¥ (BAAI/bge-m3 ì„ë² ë”©)
    â”‚
    â””â”€â”€â–¶ [4b] Neo4j ê·¸ë˜í”„ ì €ì¥ (LLM ì—”í‹°í‹° ì¶”ì¶œ)
```

### 9.3 ë‹¤ì¤‘ ì†ŒìŠ¤ ê²€ìƒ‰ (Hybrid VDB)

```
RetrieverFactory.get_retriever(user_id, kb_id, db)
    â”‚
    â”œâ”€â”€ Source A: ë‚´ë¶€ ì‹œìŠ¤í…œ Qdrant
    â”‚   â””â”€â”€ collection: kb_{kb_id}, filter: user_id
    â”‚
    â”œâ”€â”€ Source B: KBë³„ ì™¸ë¶€ Qdrant (KB.external_service_id)
    â”‚   â””â”€â”€ qdrant_resolverë¡œ í´ë¼ì´ì–¸íŠ¸ í•´ì„
    â”‚
    â””â”€â”€ Source C: ì‚¬ìš©ì ê¸°ë³¸ VDB (ExternalService.is_default=True)
        â”œâ”€â”€ Qdrant â†’ QdrantStore
        â””â”€â”€ Pinecone â†’ PineconeStore

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ stores == 1 â†’ ë‹¨ì¼ Retriever       â”‚
    â”‚ stores >= 2 â†’ HybridRetriever      â”‚
    â”‚   (asyncio.gather ë³‘ë ¬ ê²€ìƒ‰)        â”‚
    â”‚   (content[:200] ê¸°ë°˜ ì¤‘ë³µ ì œê±°)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.4 ë°ì´í„° ê²©ë¦¬

ëª¨ë“  ë°ì´í„°ëŠ” ì‚¬ìš©ì(user_id)ì™€ ì§€ì‹ ë² ì´ìŠ¤(kb_id) ë‹¨ìœ„ë¡œ ê²©ë¦¬ë©ë‹ˆë‹¤:

| ì €ì¥ì†Œ     | ê²©ë¦¬ ë°©ì‹                                       |
| ---------- | ----------------------------------------------- |
| PostgreSQL | user_id ì™¸ë˜ í‚¤, kb_id ë³µí•© ìœ ë‹ˆí¬              |
| Qdrant     | ì»¬ë ‰ì…˜: `kb_{kb_id}`, ë©”íƒ€ë°ì´í„° `user_id` í•„í„° |
| Neo4j      | ë…¸ë“œ ì†ì„±: `kb_id`, `user_id`                   |
| Redis      | ìºì‹œ í‚¤ì— user_id í¬í•¨                          |

---

## 10. API ì—”ë“œí¬ì¸íŠ¸ ë ˆí¼ëŸ°ìŠ¤

ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ëŠ” `/api/v1` ì ‘ë‘ì‚¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì¸ì¦ì´ í•„ìš”í•œ ì—”ë“œí¬ì¸íŠ¸ëŠ” `Authorization: Bearer <JWT>` í—¤ë”ê°€ í•„ìš”í•©ë‹ˆë‹¤.

### 10.1 ì¸ì¦

| ë©”ì„œë“œ | ê²½ë¡œ             | ì„¤ëª…              |
| ------ | ---------------- | ----------------- |
| POST   | `/auth/register` | íšŒì›ê°€ì…          |
| POST   | `/auth/login`    | ë¡œê·¸ì¸ (JWT ë°œê¸‰) |

### 10.2 ì±„íŒ…

| ë©”ì„œë“œ | ê²½ë¡œ           | ì„¤ëª…                    |
| ------ | -------------- | ----------------------- |
| POST   | `/chat/stream` | ìŠ¤íŠ¸ë¦¬ë° RAG ëŒ€í™” (SSE) |

### 10.3 ì§€ì‹ ë² ì´ìŠ¤

| ë©”ì„œë“œ | ê²½ë¡œ                        | ì„¤ëª…         |
| ------ | --------------------------- | ------------ |
| GET    | `/knowledge/bases`          | KB ëª©ë¡ ì¡°íšŒ |
| POST   | `/knowledge/bases`          | KB ìƒì„±      |
| GET    | `/knowledge/bases/{kb_id}`  | KB ìƒì„¸ ì¡°íšŒ |
| PUT    | `/knowledge/bases/{kb_id}`  | KB ìˆ˜ì •      |
| DELETE | `/knowledge/bases/{kb_id}`  | KB ì‚­ì œ      |
| POST   | `/knowledge/upload`         | íŒŒì¼ ì—…ë¡œë“œ  |
| GET    | `/knowledge/{kb_id}/files`  | íŒŒì¼ ëª©ë¡    |
| DELETE | `/knowledge/{kb_id}/files`  | íŒŒì¼ ì‚­ì œ    |
| GET    | `/knowledge/{kb_id}/chunks` | ì²­í¬ ì¡°íšŒ    |
| GET    | `/knowledge/{kb_id}/stats`  | KB í†µê³„      |

### 10.4 ì§€ì‹ ê·¸ë˜í”„

| ë©”ì„œë“œ | ê²½ë¡œ                            | ì„¤ëª…               |
| ------ | ------------------------------- | ------------------ |
| GET    | `/knowledge/graph?kb_id=`       | ê·¸ë˜í”„ ë°ì´í„° ì¡°íšŒ |
| POST   | `/knowledge/graph/nodes?kb_id=` | ë…¸ë“œ ìƒì„±          |
| PUT    | `/knowledge/graph/nodes/{id}`   | ë…¸ë“œ ìˆ˜ì •          |
| DELETE | `/knowledge/graph/nodes/{id}`   | ë…¸ë“œ ì‚­ì œ          |
| POST   | `/knowledge/graph/edges?kb_id=` | ê´€ê³„ ìƒì„±          |
| DELETE | `/knowledge/graph/edges/{id}`   | ê´€ê³„ ì‚­ì œ          |

### 10.5 ì—ì´ì „íŠ¸

| ë©”ì„œë“œ | ê²½ë¡œ                 | ì„¤ëª…          |
| ------ | -------------------- | ------------- |
| GET    | `/agents`            | ì—ì´ì „íŠ¸ ëª©ë¡ |
| POST   | `/agents`            | ì—ì´ì „íŠ¸ ìƒì„± |
| GET    | `/agents/{agent_id}` | ì—ì´ì „íŠ¸ ìƒì„¸ |
| PUT    | `/agents/{agent_id}` | ì—ì´ì „íŠ¸ ìˆ˜ì • |
| DELETE | `/agents/{agent_id}` | ì—ì´ì „íŠ¸ ì‚­ì œ |

### 10.6 ì„¸ì…˜ / ëŒ€í™”

| ë©”ì„œë“œ | ê²½ë¡œ                      | ì„¤ëª…               |
| ------ | ------------------------- | ------------------ |
| GET    | `/sessions`               | ì„¸ì…˜ ëª©ë¡          |
| POST   | `/sessions`               | ì„¸ì…˜ ìƒì„±          |
| GET    | `/sessions/{id}`          | ì„¸ì…˜ + ë©”ì‹œì§€ ì¡°íšŒ |
| PUT    | `/sessions/{id}`          | ì„¸ì…˜ ì œëª© ìˆ˜ì •     |
| DELETE | `/sessions/{id}`          | ì„¸ì…˜ ì‚­ì œ          |
| POST   | `/sessions/{id}/messages` | ë©”ì‹œì§€ ì¶”ê°€        |
| GET    | `/sessions/{id}/messages` | ë©”ì‹œì§€ ì¡°íšŒ        |

### 10.7 ì„¤ì •

| ë©”ì„œë“œ | ê²½ë¡œ                                 | ì„¤ëª…             |
| ------ | ------------------------------------ | ---------------- |
| GET    | `/settings/user`                     | ì‚¬ìš©ì ì„¤ì • ì¡°íšŒ |
| PUT    | `/settings/user`                     | ì‚¬ìš©ì ì„¤ì • ìˆ˜ì • |
| GET    | `/settings/config`                   | ì‹œìŠ¤í…œ ì„¤ì • ì¡°íšŒ |
| POST   | `/settings/api-keys`                 | API í‚¤ ë“±ë¡      |
| GET    | `/settings/api-keys`                 | API í‚¤ ëª©ë¡      |
| DELETE | `/settings/api-keys/{provider}`      | API í‚¤ ì‚­ì œ      |
| GET    | `/settings/ollama-models`            | Ollama ëª¨ë¸ ëª©ë¡ |
| POST   | `/settings/db-connections`           | DB ì—°ê²° ë“±ë¡     |
| GET    | `/settings/db-connections`           | DB ì—°ê²° ëª©ë¡     |
| DELETE | `/settings/db-connections/{id}`      | DB ì—°ê²° ì‚­ì œ     |
| POST   | `/settings/db-connections/{id}/test` | DB ì—°ê²° í…ŒìŠ¤íŠ¸   |
| GET    | `/settings/mcp-servers`              | MCP ì„œë²„ ëª©ë¡    |
| POST   | `/settings/mcp-servers`              | MCP ì„œë²„ ë“±ë¡    |
| DELETE | `/settings/mcp-servers/{id}`         | MCP ì„œë²„ ì‚­ì œ    |

### 10.8 ì™¸ë¶€ ì„œë¹„ìŠ¤

| ë©”ì„œë“œ | ê²½ë¡œ                          | ì„¤ëª…        |
| ------ | ----------------------------- | ----------- |
| GET    | `/services`                   | ì„œë¹„ìŠ¤ ëª©ë¡ |
| POST   | `/services`                   | ì„œë¹„ìŠ¤ ë“±ë¡ |
| PUT    | `/services/{service_id}`      | ì„œë¹„ìŠ¤ ìˆ˜ì • |
| DELETE | `/services/{service_id}`      | ì„œë¹„ìŠ¤ ì‚­ì œ |
| POST   | `/services/{service_id}/test` | ì—°ê²° í…ŒìŠ¤íŠ¸ |

### 10.9 í—¬ìŠ¤ ì²´í¬

| ë©”ì„œë“œ | ê²½ë¡œ                | ì„¤ëª…                                         |
| ------ | ------------------- | -------------------------------------------- |
| GET    | `/`                 | API ì •ë³´                                     |
| GET    | `/health`           | ì „ì²´ ìƒíƒœ                                    |
| GET    | `/health/{service}` | ì„œë¹„ìŠ¤ë³„ ìƒíƒœ (redis, neo4j, qdrant, ollama) |

---

## 11. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### PostgreSQL í…Œì´ë¸”

| í…Œì´ë¸”              | ì„¤ëª…            | ì£¼ìš” ì»¬ëŸ¼                                        |
| ------------------- | --------------- | ------------------------------------------------ |
| `users`             | ì‚¬ìš©ì          | email, name, hashed_password, is_active          |
| `user_settings`     | ì‚¬ìš©ì ì„¤ì •     | llm_model, search_top_k, use_rerank, theme       |
| `api_keys`          | API í‚¤ (ì•”í˜¸í™”) | provider, encrypted_key                          |
| `knowledge_bases`   | ì§€ì‹ ë² ì´ìŠ¤     | kb_id, name, chunk_size, external_service_id     |
| `knowledge_files`   | ì—…ë¡œë“œ íŒŒì¼     | filename, file_size_bytes, chunk_count, status   |
| `agents`            | AI ì—ì´ì „íŠ¸     | agent_id, name, model, system_prompt, published  |
| `chat_sessions`     | ëŒ€í™” ì„¸ì…˜       | session_id, title, agent_pk                      |
| `chat_messages`     | ëŒ€í™” ë©”ì‹œì§€     | role, content, thinking, metadata_json           |
| `db_connections`    | DB ì—°ê²° ì •ë³´    | db_type, host, port, encrypted_password          |
| `mcp_servers`       | MCP ì„œë²„        | server_type, url, command, enabled               |
| `external_services` | ì™¸ë¶€ ì„œë¹„ìŠ¤     | service_type, url, api_key_encrypted, is_default |

---

## 12. ë¬¸ì œ í•´ê²°

### ë°±ì—”ë“œê°€ ì‹œì‘ë˜ì§€ ì•Šì„ ë•Œ

```bash
# ì¢…ì†ì„± ì„¤ì¹˜ í™•ì¸
cd backend
pip install -r requirements.txt

# import ì˜¤ë¥˜ í™•ì¸
python -c "from app.main import app; print('OK')"
```

### Docker ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸

```bash
docker-compose -f backend/docker-compose.yml ps
```

### Ollama ëª¨ë¸ì´ í‘œì‹œë˜ì§€ ì•Šì„ ë•Œ

```bash
# Ollama ì„œë²„ ì‹¤í–‰ í™•ì¸
curl http://localhost:11434/api/tags

# ëª¨ë¸ ì„¤ì¹˜
ollama pull llama3.1
```

### ë²¡í„° ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì„ ë•Œ

1. ì§€ì‹ ë² ì´ìŠ¤ì— ë¬¸ì„œê°€ ì—…ë¡œë“œë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
2. íŒŒì¼ ìƒíƒœê°€ **Ready**ì¸ì§€ í™•ì¸
3. Qdrant ì—°ê²° ìƒíƒœ í™•ì¸: `GET /health/qdrant`
4. ì„ë² ë”© ëª¨ë¸ ë¡œë“œ ìƒíƒœ í™•ì¸ (ìµœì´ˆ ì‹œì‘ ì‹œ ë‹¤ìš´ë¡œë“œ í•„ìš”)

### Neo4j ê·¸ë˜í”„ê°€ ë¹„ì–´ìˆì„ ë•Œ

1. Neo4j ì—°ê²° ìƒíƒœ í™•ì¸: ì„¤ì • â†’ Graph DB â†’ ì—°ê²° í…ŒìŠ¤íŠ¸
2. ë¬¸ì„œ ì—…ë¡œë“œ í›„ ì—”í‹°í‹° ì¶”ì¶œì´ ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸°
3. ì˜¬ë°”ë¥¸ KBë¥¼ ì„ íƒí–ˆëŠ”ì§€ í™•ì¸ (ê·¸ë˜í”„ëŠ” KBë³„ë¡œ ê²©ë¦¬)

### Redis ì—°ê²° ì‹¤íŒ¨

Redisê°€ ì—†ì–´ë„ ì‹œìŠ¤í…œì€ ë™ì‘í•©ë‹ˆë‹¤ (ì¸ë©”ëª¨ë¦¬ í´ë°±). ìºì‹±ê³¼ ì†ë„ ì œí•œ ê¸°ëŠ¥ë§Œ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤.

---

## 13. ë³´ì•ˆ ì‚¬í•­

| í•­ëª©          | êµ¬í˜„                                  |
| ------------- | ------------------------------------- |
| ì¸ì¦          | JWT (HS256), OAuth2 Password Flow     |
| API í‚¤ ì €ì¥   | Fernet ëŒ€ì¹­ ì•”í˜¸í™” (PBKDF2 ê¸°ë°˜)      |
| DB ë¹„ë°€ë²ˆí˜¸   | Fernet ì•”í˜¸í™”                         |
| ë¹„ë°€ë²ˆí˜¸ í•´ì‹± | bcrypt                                |
| ì†ë„ ì œí•œ     | IP ê¸°ë°˜ (Redis ë°±ì—”ë“œ, ì¸ë©”ëª¨ë¦¬ í´ë°±) |
| CORS          | í—ˆìš© ë„ë©”ì¸ ì„¤ì • ê°€ëŠ¥                 |
| ë°ì´í„° ê²©ë¦¬   | ëª¨ë“  ë°ì´í„°ì— user_id í•„í„°ë§          |
| ê·¸ë˜í”„ ë³´ì•ˆ   | ë…¸ë“œ/ì—£ì§€ CRUDì— user_id ê²€ì¦         |

---

## 14. ë©€í‹°ëª¨ë‹¬ ì‹œìŠ¤í…œ ìƒì„¸ ë¬¸ì„œ

ì´ë¯¸ì§€ ê²€ìƒ‰ ë° ì²˜ë¦¬ ê¸°ëŠ¥ì— ëŒ€í•œ ìƒì„¸ ë¬¸ì„œëŠ” ë‹¤ìŒì„ ì°¸ê³ í•˜ì„¸ìš”:

### ğŸ“š ë¬¸ì„œ ëª©ë¡

1. **[MULTIMODAL_QUICKSTART.md](backend/MULTIMODAL_QUICKSTART.md)**
   - ë¹ ë¥¸ ì„¤ì¹˜ ë° ì‚¬ìš© ê°€ì´ë“œ (5ë¶„)
   - ì½”ë“œ ì˜ˆì œ ë° API ì°¸ì¡°
   - ë¬¸ì œ í•´ê²°

2. **[MULTIMODAL_GUIDE.md](backend/MULTIMODAL_GUIDE.md)**
   - ì „ì²´ ê¸°ëŠ¥ ê°€ì´ë“œ
   - ì„¤ì¹˜ ë° ì„¤ì • ìƒì„¸
   - API ë ˆí¼ëŸ°ìŠ¤
   - ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬
   - í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

3. **[MULTIMODAL_ARCHITECTURE.md](backend/MULTIMODAL_ARCHITECTURE.md)**
   - ê¸°ìˆ  ì•„í‚¤í…ì²˜ ì„¤ëª…
   - ëª¨ë¸ ì„ íƒ ê·¼ê±°
   - ì„ë² ë”© ì „ëµ
   - ë°ì´í„° íë¦„
   - ì„±ëŠ¥ ìµœì í™” ê¸°ë²•
   - í™•ì¥ì„± ë° íŠ¸ë ˆì´ë“œì˜¤í”„

### ğŸ¯ ë¹ ë¥¸ ì‹œì‘

```bash
# 1. ì˜ì¡´ì„± ì„¤ì¹˜
cd backend
pip install -r requirements.txt

# 2. .env íŒŒì¼ì— ì´ë¯¸ì§€ í™•ì¥ì ì¶”ê°€
# ALLOWED_FILE_EXTENSIONS=.pdf,.docx,.txt,.jpg,.png,.gif,.webp

# 3. DB ë§ˆì´ê·¸ë ˆì´ì…˜
python migrate_db.py

# 4. ì„¤ì¹˜ í…ŒìŠ¤íŠ¸
python test_image_upload.py

# 5. ë°±ì—”ë“œ ì‹œì‘
uvicorn app.main:app --reload
```

### ğŸ” ì£¼ìš” ê¸°ëŠ¥

- **CLIP ì´ë¯¸ì§€ ì„ë² ë”©**: 512ì°¨ì› ë²¡í„°ë¡œ ì´ë¯¸ì§€ ê²€ìƒ‰ ê°€ëŠ¥
- **ìë™ ìº¡ì…”ë‹**: BLIP ëª¨ë¸ì´ ì´ë¯¸ì§€ ì„¤ëª… ìƒì„±
- **OCR í…ìŠ¤íŠ¸ ì¶”ì¶œ**: EasyOCRë¡œ í•œê¸€/ì˜ë¬¸ í…ìŠ¤íŠ¸ ì¶”ì¶œ
- **í¬ë¡œìŠ¤ ëª¨ë‹¬ ê²€ìƒ‰**: í…ìŠ¤íŠ¸ ì§ˆë¬¸ìœ¼ë¡œ ì´ë¯¸ì§€ ê²€ìƒ‰, ì´ë¯¸ì§€ë¡œ í…ìŠ¤íŠ¸ ê²€ìƒ‰
- **íŒŒì¼ ë·°ì–´**: ì¸ë„¤ì¼ ë¯¸ë¦¬ë³´ê¸°, ë©”íƒ€ë°ì´í„° í‘œì‹œ, ë¼ì´íŠ¸ë°•ìŠ¤ í™•ëŒ€

ìì„¸í•œ ë‚´ìš©ì€ ìƒë‹¨ ë¬¸ì„œ ë§í¬ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

---

_RAG AI System v1.0 with Multimodal Support_
